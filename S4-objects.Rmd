---
title: "S4 Objects"
output: html_notebook
---

# Loading an Object

We're going to load an object called `my_result_object`, which has the class `StatsPackageResult`. 

```{r}
source("R/classes-S4.R")
library(here)
my_result_object <- readRDS(here("data/s4_stat_result.rds"))
```

## `getClass`

```{r}
class(my_result_object)

str(my_result_object)
```

## Slots

```{r}
slotNames(my_result_object)
```

## Methods

We've defined two methods that work on our class: `statistics()` and `get_significant_results()`. 

Let's try out and see what `statistics()` does:

```{r}
statistics(my_result_object)
```

```{r}
statistics
showMethods("statistics")
getMethod(f="statistics", signature = signature("StatPackageResult"))
```

# PROBLEM

Show the method code for `get_significant_results()`. Hint: you'll have to find the signature for the method before you can use `getMethod()` 

```{r}

```

# Making a new `StatsPackageResult` object

Now that you see the basics behind the `StatsPackageResult` class, you can now make a `StatsPackageResult` object. You will probably do this in your package code when you're returning a result. 

We know that the required slots are for `data`, which needs to be `data.frame`, and `statistics`, which also needs to be a `data.frame`. What if we make a new object where `statistics` is a `vector`?

```{r}
new_obj <- StatPackageResult(data=ChickWeight, statistics=c(1,1,1))
```

# How did we make the `StatsPackageResult` Class?

Take a look at `R/classes-S4.R`. The first thing we did was define the class with `setClass`:

```
StatPackageResult <- setClass("StatPackageResult",
                       slots = c(data = "data.frame",
                                 statistics = "data.frame"),
                       prototype = c(data=NA, statistics=NA)
                       )
```

# Defining a method for `StatsPackageResult`

Because methods can be dispatched on multiple signatures, you first have to define the method using `setGeneric()`:

```

```

# Resources

- S4 Classes and Methods: https://kasperdanielhansen.github.io/genbioconductor/html/R_S4.html
- A practical Tutorial on S4 Programming: https://www.bioconductor.org/help/course-materials/2013/CSAMA2013/friday/afternoon/S4-tutorial.pdf
- https://www.cyclismo.org/tutorial/R/s4Classes.html
- S4 